<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>å¹³æ°‘VSèµ„æœ¬ äº’åŠ¨æ¸¸æˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    .container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    canvas {
      flex: 1;
      background: #000;
    }
    .interaction-bar {
      display: flex;
      justify-content: space-around;
      padding: 10px;
      background: #333;
    }
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      font-size: 14px;
    }
    .like {
      background: #f53d3d;
    }
    .comment {
      background: #86909c;
    }
    .share {
      background: #165dff;
    }
    .info {
      padding: 10px;
      font-size: 12px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas id="gameCanvas"></canvas>
    <div class="interaction-bar">
      <button class="btn like" id="likeBtn">â¤ï¸ ç‚¹èµ 0</button>
      <button class="btn comment" id="commentBtn">ğŸ’¬ è¯„è®º 0</button>
      <button class="btn share" id="shareBtn">ğŸ”— åˆ†äº« 0</button>
    </div>
    <div class="info">
      <p>å¹³æ°‘ç™¾å§“VSèµ„æœ¬ä¸»ä¹‰ è°èƒ½è·èƒœï¼Ÿ</p>
      <p>2025-10-29</p>
    </div>
  </div>

  <script>
    // è·å–ç”»å¸ƒå’Œä¸Šä¸‹æ–‡
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    // é€‚é…æ‰‹æœºå±å¹•
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight * 0.7; // é¢„ç•™ç©ºé—´ç»™äº¤äº’æ 
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // å•ä½ç±»
    class Unit {
      constructor(x, y, color, type) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.type = type; // å•ä½ç±»å‹ï¼ˆå†œæ°‘/èµ„æœ¬å®¶ï¼‰
        this.width = 20;
        this.height = 30;
        this.speed = 2;
        this.health = 100;
      }
      update() {
        // å†œæ°‘å‘å³ç§»åŠ¨ï¼Œèµ„æœ¬å®¶å‘å·¦ç§»åŠ¨
        this.x += this.type === 'farmer' ? this.speed : -this.speed;
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x, this.y, this.width, this.height);
        // ç»˜åˆ¶è¡€æ¡
        ctx.fillStyle = 'red';
        ctx.fillRect(this.x, this.y - 10, this.health * 0.2, 5);
      }
      isColliding(other) {
        return (
          this.x < other.x + other.width &&
          this.x + this.width > other.x &&
          this.y < other.y + other.height &&
          this.y + this.height > other.y
        );
      }
      takeDamage(damage) {
        this.health -= damage;
        return this.health <= 0;
      }
    }

    // æ¸¸æˆçŠ¶æ€
    const gameState = {
      farmers: [],
      capitalists: [],
      resources: {
        farmer: 100,
        capitalist: 100
      },
      likeCount: 0,
      commentCount: 0,
      shareCount: 0
    };

    // åˆå§‹åŒ–å»ºç­‘ï¼ˆç®€åŒ–ç‰ˆï¼Œä»…åšè§†è§‰ç¤ºæ„ï¼‰
    function drawBuildings() {
      // å†œæ°‘å»ºç­‘åŒºï¼ˆå·¦ä¾§ï¼‰
      ctx.fillStyle = 'yellow';
      ctx.fillRect(20, canvas.height - 80, 40, 60);
      ctx.fillRect(80, canvas.height - 80, 40, 60);
      // èµ„æœ¬å®¶å»ºç­‘åŒºï¼ˆå³ä¾§ï¼‰
      ctx.fillStyle = 'green';
      ctx.fillRect(canvas.width - 100, canvas.height - 80, 40, 60);
      ctx.fillRect(canvas.width - 160, canvas.height - 80, 40, 60);
      // ç»˜åˆ¶å»ºç­‘æ ‡ç­¾
      ctx.fillStyle = 'white';
      ctx.font = '12px Arial';
      ctx.fillText('å†œåœº', 30, canvas.height - 40);
      ctx.fillText('æ­¦å™¨åº“', 90, canvas.height - 40);
      ctx.fillText('é“¶è¡Œ', canvas.width - 90, canvas.height - 40);
      ctx.fillText('èµ„æœ¬', canvas.width - 150, canvas.height - 40);
    }

    // åŠ¨ç”»å¾ªç¯
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBuildings();

      // æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰å•ä½
      const allUnits = [...gameState.farmers, ...gameState.capitalists];
      allUnits.forEach(unit => {
        unit.update();
        unit.draw();
      });

      // ç¢°æ’æ£€æµ‹
      for (let i = 0; i < gameState.farmers.length; i++) {
        for (let j = 0; j < gameState.capitalists.length; j++) {
          const farmer = gameState.farmers[i];
          const capitalist = gameState.capitalists[j];
          if (farmer.isColliding(capitalist)) {
            const farmerDied = farmer.takeDamage(20);
            const capitalistDied = capitalist.takeDamage(20);
            if (farmerDied) gameState.farmers.splice(i, 1);
            if (capitalistDied) gameState.capitalists.splice(j, 1);
            break; // ä¸€æ¬¡ç¢°æ’åè·³å‡ºå¾ªç¯ï¼Œé¿å…é‡å¤æ£€æµ‹
          }
        }
      }

      requestAnimationFrame(animate);
    }
    animate();

    // ç‚¹å‡»ç”Ÿæˆå•ä½
    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      if (x < canvas.width / 2) {
        // å·¦ä¾§ç”Ÿæˆå†œæ°‘
        if (gameState.resources.farmer >= 50) {
          gameState.farmers.push(new Unit(x, y, 'yellow', 'farmer'));
          gameState.resources.farmer -= 50;
        }
      } else {
        // å³ä¾§ç”Ÿæˆèµ„æœ¬å®¶
        if (gameState.resources.capitalist >= 50) {
          gameState.capitalists.push(new Unit(x, y, 'green', 'capitalist'));
          gameState.resources.capitalist -= 50;
        }
      }
    });

    // äº¤äº’æŒ‰é’®äº‹ä»¶
    document.getElementById('likeBtn').addEventListener('click', () => {
      gameState.likeCount++;
      document.getElementById('likeBtn').innerText = `â¤ï¸ ç‚¹èµ ${gameState.likeCount}`;
    });
    document.getElementById('commentBtn').addEventListener('click', () => {
      gameState.commentCount++;
      document.getElementById('commentBtn').innerText = `ğŸ’¬ è¯„è®º ${gameState.commentCount}`;
    });
    document.getElementById('shareBtn').addEventListener('click', () => {
      gameState.shareCount++;
      document.getElementById('shareBtn').innerText = `ğŸ”— åˆ†äº« ${gameState.shareCount}`;
    });
  </script>
</body>
</html>
